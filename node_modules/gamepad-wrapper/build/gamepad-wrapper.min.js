!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GamepadWrapper={})}(this,(function(t){"use strict";const e={RC_BOTTOM:"RC_BOTTOM",RC_RIGHT:"RC_RIGHT",RC_LEFT:"RC_LEFT",RC_TOP:"RC_TOP",BUMPER_LEFT:"BUMPER_LEFT",BUMPER_RIGHT:"BUMPER_RIGHT",TRIGGER_LEFT:"TRIGGER_LEFT",TRIGGER_RIGHT:"TRIGGER_RIGHT",CC_LEFT:"CC_LEFT",CC_RIGHT:"CC_RIGHT",THUMBSTICK_LEFT:"THUMBSTICK_LEFT",THUMBSTICK_RIGHT:"THUMBSTICK_RIGHT",LC_BOTTOM:"LC_BOTTOM",LC_RIGHT:"LC_RIGHT",LC_LEFT:"LC_LEFT",LC_TOP:"LC_TOP",CC_CENTER:"CC_CENTER"},T={RC_BOTTOM:0,RC_RIGHT:1,RC_LEFT:2,RC_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,CC_LEFT:8,CC_RIGHT:9,THUMBSTICK_LEFT:10,THUMBSTICK_RIGHT:11,LC_BOTTOM:12,LC_RIGHT:13,LC_LEFT:14,LC_TOP:15,CC_CENTER:16},n={THUMBSTICK_LEFT_X:"THUMBSTICK_LEFT_X",THUMBSTICK_LEFT_Y:"THUMBSTICK_LEFT_Y",THUMBSTICK_RIGHT_X:"THUMBSTICK_RIGHT_X",THUMBSTICK_RIGHT_Y:"THUMBSTICK_RIGHT_Y"},s={THUMBSTICK_LEFT_X:0,THUMBSTICK_LEFT_Y:1,THUMBSTICK_RIGHT_X:2,THUMBSTICK_RIGHT_Y:3},_={TRIGGER:"TRIGGER",SQUEEZE:"SQUEEZE",TOUCHPAD:"TOUCHPAD",THUMBSTICK:"THUMBSTICK",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2"},u={TRIGGER:0,SQUEEZE:1,TOUCHPAD:2,THUMBSTICK:3,BUTTON_1:4,BUTTON_2:5},a={TOUCHPAD_X:"TOUCHPAD_X",TOUCHPAD_Y:"TOUCHPAD_Y",THUMBSTICK_X:"THUMBSTICK_X",THUMBSTICK_Y:"THUMBSTICK_Y"},o={TOUCHPAD_X:0,TOUCHPAD_Y:1,THUMBSTICK_X:2,THUMBSTICK_Y:3};const i={STANDARD:e,XR_STANDARD:_},r={STANDARD:n,XR_STANDARD:a};t.AXES=r,t.BUTTONS=i,t.GamepadWrapper=class{constructor(t,e={}){var T,n,s;this._buttons=[],this._gamepad=t,this._buttonPressValueMin=null!==(T=e.buttonPressValueMin)&&void 0!==T?T:0,this._buttonPressValueMax=null!==(n=e.buttonPressValueMax)&&void 0!==n?n:1,this._buttonClickThreshold=null!==(s=e.buttonClickThreshold)&&void 0!==s?s:.9;for(let t=0;t<this._gamepad.buttons.length;t++)this._buttons[t]={currFrame:{value:0,touched:!1},prevFrame:{value:0,touched:!1},pressedSince:0}}update(){for(let t=0;t<this._gamepad.buttons.length;t++)this._buttons[t].prevFrame=this._buttons[t].currFrame,this._buttons[t].currFrame={value:this._gamepad.buttons[t].value,touched:this._gamepad.buttons[t].touched}}get gamepad(){return this._gamepad}getButtonIdx(t){const e="standard"==this._gamepad.mapping?T[t]:"xr-standard"==this._gamepad.mapping?u[t]:null;if(null==e)throw`Button "${t}" does not exist in layout "${this._gamepad.mapping}"`;return e}getAxisIdx(t){const e="standard"==this._gamepad.mapping?s[t]:"xr-standard"==this._gamepad.mapping?o[t]:null;if(null==e)throw`Axis "${t}" does not exist in layout "${this._gamepad.mapping}"`;return e}getButtonValueByIndex(t){return this._buttons[t]?this._buttons[t].currFrame.value:0}getButtonValue(t){const e=this.getButtonIdx(t);return this.getButtonValueByIndex(e)}getButtonByIndex(t){return!!this._buttons[t]&&this._buttons[t].currFrame.value>this._buttonPressValueMin}getButton(t){const e=this.getButtonIdx(t);return this.getButtonByIndex(e)}getButtonDownByIndex(t){return!!this._buttons[t]&&(this._buttons[t].prevFrame.value<=this._buttonPressValueMin&&this._buttons[t].currFrame.value>this._buttonPressValueMin)}getButtonDown(t){const e=this.getButtonIdx(t);return this.getButtonDownByIndex(e)}getButtonUpByIndex(t){return!!this._buttons[t]&&(this._buttons[t].prevFrame.value>=this._buttonPressValueMax&&this._buttons[t].currFrame.value<this._buttonPressValueMax)}getButtonUp(t){const e=this.getButtonIdx(t);return this.getButtonUpByIndex(e)}getButtonClickByIndex(t){return!!this._buttons[t]&&(this._buttons[t].prevFrame.value<=this._buttonClickThreshold&&this._buttons[t].currFrame.value>this._buttonClickThreshold)}getButtonClick(t){const e=this.getButtonIdx(t);return this.getButtonClickByIndex(e)}getAxisByIndex(t){return this._gamepad.axes[t]}getAxis(t){const e=this.getAxisIdx(t);return this.getAxisByIndex(e)}get2DInputAngle(t){const e=this.getAxis(t+"_X"),T=this.getAxis(t+"_Y");if(null==e||null==T||0==e&&0==T)return NaN;let n=Math.atan(e/T);return e>=0?T<0?n*=-1:T>0?n=Math.PI-n:0==T&&(n=Math.PI/2):T<0?n*=-1:T>0?n=-Math.PI-n:0==T&&(n=-Math.PI/2),n}get2DInputValue(t){const e=this.getAxis(t+"_X"),T=this.getAxis(t+"_Y");return Math.sqrt(e*e+T*T)}getHapticActuator(t){const e=this._gamepad.hapticActuators[t];if(e)return e;throw"Requested haptic actuator does not exist in gamepad"}},t.STANDARD_AXES=n,t.STANDARD_BUTTONS=e,t.XR_AXES=a,t.XR_BUTTONS=_}));
